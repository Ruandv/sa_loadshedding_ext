# Docs for the Azure Web Apps Deploy action: https://github.com/Azure/webapps-deploy
# More GitHub Actions for Azure: https://github.com/Azure/actions

name: Check for DO NOT MERGE

on:
  label:
    types: [created, deleted]
  pull_request:
    branches: [ master ]

jobs:
  fail-for-draft:
    runs-on: ubuntu-latest
    steps:
      - name: list all labels
        run: echo github.event.pull_request.labels.*.name
      - name: Fail if PR says DO_NOT_MERGE
        if: contains(github.event.pull_request.labels.*.name, 'merge') # Move the condition to here
        run: |
          echo "This PR should not be merged at this stage."
          exit 1